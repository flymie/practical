<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>
<button id="btn">下载</button>
<script>
	function format() {
		const data = [
			{
				_id: '652123c04bdfdc17e0db1b1a',
				monitor: '64d49a6ab888372b74c13ad9',
				date: '2023-10-07T09:20:00.000Z',
				origin_data: { level: 0, sigstr: 31, voltage: 3.65 },
			},
			{
				_id: '652110064bdfdc17e0d52f2a',
				monitor: '64d49a6ab888372b74c13ad9',
				date: '2023-10-07T08:00:00.000Z',
				origin_data: { level: 0.01, sigstr: 31, voltage: 3.64, test: [{ a: 1}] },
			},
		];

		const dfs = (data) => {
			if (Object.prototype.toString.call(data) !== '[object Object]' && Object.prototype.toString.call(data) !== '[object Array]') {
				return data;
			}

			let res = [];
			if (Object.prototype.toString.call(data) === '[object Object]') {
				Object.keys(data).forEach((key) => {
					res.push(dfs(data[key]));
				})
			}

			if (Object.prototype.toString.call(data) === '[object Array]') {
				data.forEach((v) => {
					res.push(dfs(v));
				});
			}

			return res;
		}

		let res = dfs(data);

		// 拍扁第一行
		res = res.map((v) => {
			return v.flat(Infinity);
		})
console.log(res)
		return res;
	}

	format()
</script>
</body>
</html>
